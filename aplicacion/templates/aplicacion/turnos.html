{% extends "aplicacion/index.html" %}
{% load static %}


{% block Body %}
<header class="mastheadconsultas">

    <section class="container-calendar">
        <h2>Kinesiología Dermatofuncional y Estética</h2>
        <h3>Verónica Di Giannantonio M.2871/2</h3>
        <!-- Google Calendar Vero -->
        <script>
            (function() {
              var target = document.currentScript;
              window.addEventListener('load', function() {
                calendar.schedulingButton.load({
                  url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ39Ss71lFFsqEsxRIU0Xyhiy4Tj6vqj0_ExAwVpANgqpNFOwSZr2UOD5Ym2QJz2g-0yiitXgBFZ?gv=true&ctz=America/Argentina/Buenos_Aires',
                  color: '#83008b',
                  label: 'Reservar un turno',
                  target,
                });
              });
            })();
        </script>
        <!-- end Google Calendar Vero -->
    </section>

    <section class="container-calendar">
        <h2>Reeducación Postural Global (R. P. G.)</h2>
        <h3>Guido Bazzana M.1587/2</h3>
        <!-- Google Calendar Guido -->
        <script>
          (function() {
            var target = document.currentScript;
            window.addEventListener('load', function() {
              calendar.schedulingButton.load({
                url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ2dA0hgRTn1GJbUWd-XZzWF82Hlq3x-oUWjI9TBthZqeJFrsdsLTES83owhSlOfKvMPOcgzipXH?gv=true&ctz=America/Argentina/Buenos_Aires',
                color: '#83008b',
                label: 'Reservar un turno',
                target,
              });
            });
          })();
          </script>
        <!-- end Google Calendar Guido -->
        <!-- Script para detectar zona horaria diferente -->
<script>
    // Detectar zona horaria del usuario
    const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

    // Obtener la hora actual en Argentina y en la zona del usuario
    const now = new Date();
    const argentinaTime = new Date(now.toLocaleString('en-US', { timeZone: 'America/Argentina/Buenos_Aires' }));
    const userTime = new Date(now.toLocaleString('en-US', { timeZone: userTimezone }));

    // Calcular diferencia en horas
    const diffMilliseconds = userTime - argentinaTime;
    const diffHours = Math.round(diffMilliseconds / (1000 * 60 * 60));

    // Si el usuario NO está en zona horaria argentina (diferencia mayor a 0)
    if (Math.abs(diffHours) >= 1) {
        // Determinar si está adelantado o atrasado
        const diffText = diffHours > 0
            ? `${Math.abs(diffHours)} horas adelantado`
            : `${Math.abs(diffHours)} horas atrasado`;

        // Mostrar alerta después de 2 segundos
        setTimeout(() => {
            const mensaje = `⚠️ ATENCIÓN - ZONA HORARIA\n\nDetectamos que estás en una zona horaria diferente a Argentina.\n\n` +
                          `Tu zona horaria: ${userTimezone}\n` +
                          `Diferencia: ${diffText} respecto a Argentina (GMT-3)\n\n` +
                          `Por favor, ten esto en cuenta al reservar tu turno.\n\n` +
                          `¿Deseas ver un conversor de horarios?`;

            if (confirm(mensaje)) {
                window.open('https://www.timeanddate.com/worldclock/converter.html?iso=20250101T120000&p1=51', '_blank');
            }
        }, 2000);
    }
</script>
    </section>
</header>


{% endblock Body %}